/*
 날짜 : 2025/07/14
 이름 : 박효빈
 내용 : 2장 SQL 기본
 
*/
-- 실습 1-2, NUMBER 자료형 이해
CREATE TABLE TYPE_TEST_NUMBER (
    
    num1 NUMBER,
    num2 NUMBER(2),
    num3 NUMBER(3,1),
    num4 NUMBER(4,2),
    num5 NUMBER(5,6),
    num6 NUMBER(6,-1)
);

//num1 NUMBER
INSERT INTO type_test_number (num1) VALUES (1);//삽입된 값 1
INSERT INTO type_test_number (num1) VALUES (123);//삽입된 값 123
INSERT INTO type_test_number (num1) VALUES (123.74);// 삽입된 값 123.74
INSERT INTO type_test_number (num1) VALUES (123.12345); //삽입된 값 123.12345

//num2 NUMBER(2)
INSERT INTO TYPE_TEST_NUMBER (num2) VALUES (12); //삽입 된 값 12
INSERT INTO TYPE_TEST_NUMBER (num2) VALUES (123); //삽입 x
INSERT INTO TYPE_TEST_NUMBER (num2) VALUES (1.2); //삽입 된 값 1
INSERT INTO TYPE_TEST_NUMBER (num2) VALUES (1.23);//삽입 된 값 1
INSERT INTO TYPE_TEST_NUMBER (num2) VALUES (12.34567); //삽입 된 값 12
INSERT INTO TYPE_TEST_NUMBER (num2) VALUES (12.56789); //삽인 된 값 13
INSERT INTO TYPE_TEST_NUMBER (num2) VALUES (123.56789); //삽입 x

//num3 NUMBER(3,1)
INSERT INTO TYPE_TEST_NUMBER (num3) VALUES (12);//삽입된 값 12
INSERT INTO TYPE_TEST_NUMBER (num3) VALUES (123);//삽입 X
INSERT INTO TYPE_TEST_NUMBER (num3) VALUES (12.1);//삽입된 값 12.1
INSERT INTO TYPE_TEST_NUMBER (num3) VALUES (12.1234);//삽입된 값 12.1
INSERT INTO TYPE_TEST_NUMBER (num3) VALUES (12.56789);//삽입된 값 12.6
INSERT INTO TYPE_TEST_NUMBER (num3) VALUES (123.56789);//삽입 x

//num4 NUMBER(4,2)
INSERT INTO TYPE_TEST_NUMBER (num4) VALUES (12); //12
INSERT INTO TYPE_TEST_NUMBER (num4) VALUES (123); //실패
INSERT INTO TYPE_TEST_NUMBER (num4) VALUES (12.1); //12.1
INSERT INTO TYPE_TEST_NUMBER (num4) VALUES (12.1234); //12.12
INSERT INTO TYPE_TEST_NUMBER (num4) VALUES (12.5678); // 12.57
INSERT INTO TYPE_TEST_NUMBER (num4) VALUES (123.56789); //실패 

//num5 NUMBER(5,6)
INSERT INTO TYPE_TEST_NUMBER (num5) VALUES (12); 
INSERT INTO TYPE_TEST_NUMBER (num5) VALUES (123);
INSERT INTO TYPE_TEST_NUMBER (num5) VALUES (12.1);
INSERT INTO TYPE_TEST_NUMBER (num5) VALUES (12.1234);
INSERT INTO TYPE_TEST_NUMBER (num5) VALUES (12.5678);
INSERT INTO TYPE_TEST_NUMBER (num5) VALUES (12.56789);

//num6 NUMBER(6,-1)
INSERT INTO TYPE_TEST_NUMBER (num6) VALUES (12); 
INSERT INTO TYPE_TEST_NUMBER (num6) VALUES (123);
INSERT INTO TYPE_TEST_NUMBER (num6) VALUES (12.1); 
INSERT INTO TYPE_TEST_NUMBER (num6) VALUES (12.1234); 
INSERT INTO TYPE_TEST_NUMBER (num6) VALUES (12.5678); 
INSERT INTO TYPE_TEST_NUMBER (num6) VALUES (12.56789);

//1-3 문자형 자료형 이해
CREATE TABLE TYPE_TEST_CHAR (
char1 CHAR(1),
char2 CHAR(2),
char3 CHAR(3),
vchar1 VARCHAR2(1),
vchar2 VARCHAR2(2),
vchar3 VARCHAR2(3),
nvchar1 NVARCHAR2(1),
nvchar2 NVARCHAR2(2),
nvchar3 NVARCHAR2(3)
);

//1-4 테이블 생성
CREATE TABLE USER1 (
USER_ID VARCHAR2(20),
NAME VARCHAR2(20),
HP CHAR(13),
AGE NUMBER(2)
);

//DROP TABLE USER1

//실습하기 1-5
INSERT INTO USER1 VALUES ('A101','김유신','010-1234-1111',25);
INSERT INTO USER1 VALUES ('A102','김춘추','010-1234-2222',23);
INSERT INTO USER1 VALUES ('A103','장보고','010-1234-3333',32);
INSERT INTO USER1 (USER_ID, NAME, AGE) VALUES ('A104','강감찬',45);
INSERT INTO USER1 (USER_ID, NAME, HP) VALUES ('A105','이순신','010-1234-5555');


//실습 하기 1-6 SELECT 문
SELECT * FROM USER1;
SELECT * FROM USER1 WHERE USER_ID = 'A101';
SELECT * FROM USER1 WHERE NAME = '김춘추';
SELECT * FROM USER1 WHERE AGE>30;
SELECT USER_ID, NAME, AGE FROM USER1;

//실습 하기 1-7 UPDATE문
UPDATE USER1 SET HP='010-1234-4444' WHERE USER_ID ='A104';
UPDATE USER1 SET AGE=51 WHERE USER_ID = 'A105'; 
UPDATE USER1 SET HP ='010-1234-1001', AGE = 27 WHERE USER_ID = 'A101';
SELECT * FROM USER1;

//실습 하기 1-8 DELETE문
DELETE FROM USER1 WHERE USER_ID = 'A101';
DELETE FROM USER1 WHERE USER_ID ='A102' AND AGE =25; //23세 조건 X 삭제 X
DELETE FROM USER1 WHERE AGE>=30;
SELECT * FROM USER1;

-------------제약조건-----------
//실습하기 2-1 PRIMARY KEY 
CREATE TABLE USER2 (
    USER_ID VARCHAR(20) PRIMARY KEY,
    NAME VARCHAR(20),
    HP CHAR(13),
    AGE NUMBER(2)
    );
-- PRIMART KEY (기본키) 컬럼은 중복 안됨
INSERT INTO USER2 VALUES ('A101','김유신','010-1234-1111',23);
INSERT INTO USER2 VALUES ('A101','김춘추','010-1234-2222',21);
    
//실습하기 2-2 PRIMARY KEY + UNIQUE 
CREATE TABLE USER3 (
USER_ID VARCHAR2(20) PRIMARY KEY,
NAME VARCHAR2(20),
HP CHAR(13) UNIQUE,
AGE NUMBER(3)
);

INSERT INTO USER3 VALUES ('A101','김유신','010-1234-1111',23);
INSERT INTO USER3 VALUES ('A102','김춘추','010-1234-2111',25);
INSERT INTO USER3 VALUES ('A103','라이언',NULL,25);

SELECT * FROM USER3;


CREATE TABLE PARENT (
PID VARCHAR2(20) PRIMARY KEY,
NAME VARCHAR2(20),
HP CHAR(13) UNIQUE
);

CREATE TABLE CHILD (
CID VARCHAR2(20) PRIMARY KEY,
NAME VARCHAR2(20),
HP CHAR(13) UNIQUE,
PARENT VARCHAR(20),
FOREIGN KEY (PARENT) rEFERENCES PARENT (PID)
);

INSERT INTO PARENT VALUES ('P101','김서현','010-1234-1001');
INSERT INTO PARENT VALUES ('P102','이성계','010-1234-1002');
INSERT INTO PARENT VALUES ('P103','신사임당','010-1234-1003');

INSERT INTO CHILD VALUES ('C101','김유신','010-1234-2001','P101');
INSERT INTO CHILD VALUES ('C102','이방우','010-1234-2002','P102');
INSERT INTO CHILD VALUES ('C103','이방원','010-1234-2003','P102');
INSERT INTO CHILD VALUES ('C104','이이','010-1234-2004','P103');
INSERT INTO CHILD VALUES ('C104','김철수','010-1234-2004','P105'); //무결성제약조건 위배

//PK - NOT NULL / UK FK - NULL

//실습하기 2-4 DEFAULT / NOT NULL

CREATE TABLE USER4 (
NAME VARCHAR2(20) NOT NULL,
GENDER CHAR(1) NOT NULL,
AGE NUMBER(2) DEFAULT 1,
ADDR VARCHAR2(255)
);

INSERT INTO USER4 VALUES ('김유신', 'M',23,'김해시');
INSERT INTO USER4 VALUES ('김춘추', 'M',21,'경주시');
INSERT INTO USER4 (NAME, GENDER, ADDR) VALUES ('신사임당','F','강릉시');
INSERT INTO USER4 (NAME, GENDER) VALUES ('이순신','M');
INSERT INTO USER4 (NAME, AGE) VALUES ('정약용',33); --성별은 NOT NULL 선언하여서 해당 쿼리는 오류가 발생

CREATE TABLE USER5 (
NAME VARCHAR2(20) NOT NULL,
GENDER CHAR(1) NOT NULL CHECK(GENDER IN('M','F')),
AGE NUMBER(2) DEFAULT 1 CHECK(AGE > 0 AND AGE <100),
ADDR VARCHAR(255)
);

INSERT INTO USER5 VALUES ('김유신','M',23,'김해시');
INSERT INTO USER5 VALUES ('김춘추','M',21,'경주시');
INSERT INTO USER5 (NAME, GENDER, ADDR) VALUES ('신사임당','F','강릉시');
INSERT INTO USER5 (NAME, GENDER) VALUES ('이순신','M');
INSERT INTO USER5 (NAME, AGE) VALUES ('정약용',33); -- 성별 값 누락
SELECT * FROM USER5;

--실습하기 2-5 : IDENTITY
CREATE TABLE USER7 (
ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
NAME VARCHAR2(20),
AGE NUMBER,
EMAIL VARCHAR2(100)
);

INSERT INTO USER7 (NAME,AGE,EMAIL) VALUES ('김유신',25,'kim@gmail.com');
INSERT INTO USER7 (NAME,AGE,EMAIL) VALUES ('장보고',35,'jang@gmail.com');
INSERT INTO USER7 (NAME,AGE,EMAIL) VALUES ('이순신',45,'lee@gmail.com');

SELECT * FROM USER7;

CREATE TABLE PARENT999 (
PID VARCHAR2(20) PRIMARY KEY,
NAME VARCHAR2(20),
HP CHAR(13) UNIQUE
);

CREATE TABLE CHILD999 (
CID VARCHAR2(20) PRIMARY KEY,
NAME VARCHAR2(20),
HP CHAR(13) UNIQUE,
PARENT VARCHAR(20),
FOREIGN KEY (PARENT) REFERENCES PARENT999 (PID)
);





